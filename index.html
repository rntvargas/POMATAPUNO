<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clasificador de Estudios Científicos</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        .gradient-bg {
            background: linear-gradient(120deg, #4F46E5, #7C3AED);
        }
        .glass-effect {
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .loader {
            border-top-color: #4F46E5;
            -webkit-animation: spinner 1.5s linear infinite;
            animation: spinner 1.5s linear infinite;
        }
        @-webkit-keyframes spinner {
            0% { -webkit-transform: rotate(0deg); }
            100% { -webkit-transform: rotate(360deg); }
        }
        @keyframes spinner {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="gradient-bg text-white">
        <header class="container mx-auto py-8 px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-6 md:mb-0">
                    <h1 class="text-3xl md:text-4xl font-bold flex items-center">
                        <i class="fas fa-microscope mr-3"></i>
                        Clasificador de Estudios Científicos
                    </h1>
                    <p class="mt-2 text-lg opacity-90">Análisis inteligente y recomendaciones estadísticas</p>
                </div>
                <div class="flex space-x-4">
                    <button id="helpBtn" class="bg-white text-indigo-600 px-4 py-2 rounded-lg font-medium hover:bg-opacity-90 transition">
                        <i class="fas fa-question-circle mr-2"></i>Ayuda
                    </button>
                    <button id="examplesBtn" class="bg-indigo-500 px-4 py-2 rounded-lg font-medium hover:bg-indigo-600 transition">
                        <i class="fas fa-lightbulb mr-2"></i>Ejemplos
                    </button>
                </div>
            </div>
        </header>
    </div>

    <main class="container mx-auto py-8 px-4">
        <!-- Intro Card -->
        <div class="glass-effect p-6 rounded-xl shadow-lg mb-8 text-gray-800 bg-white">
            <h2 class="text-2xl font-bold mb-4">¿Qué es este clasificador?</h2>
            <p class="mb-4">Esta herramienta utiliza inteligencia artificial para analizar estudios científicos y proporcionar:</p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
                <div class="bg-indigo-50 p-4 rounded-lg">
                    <div class="flex items-center text-indigo-700 mb-2">
                        <i class="fas fa-tags text-xl mr-2"></i>
                        <h3 class="font-bold">Clasificación</h3>
                    </div>
                    <p class="text-gray-700">Identifica el tipo de estudio, metodología y área de investigación</p>
                </div>
                <div class="bg-indigo-50 p-4 rounded-lg">
                    <div class="flex items-center text-indigo-700 mb-2">
                        <i class="fas fa-chart-bar text-xl mr-2"></i>
                        <h3 class="font-bold">Métodos Estadísticos</h3>
                    </div>
                    <p class="text-gray-700">Recomienda técnicas estadísticas adecuadas para el análisis de datos</p>
                </div>
                <div class="bg-indigo-50 p-4 rounded-lg">
                    <div class="flex items-center text-indigo-700 mb-2">
                        <i class="fas fa-tools text-xl mr-2"></i>
                        <h3 class="font-bold">Instrumentos</h3>
                    </div>
                    <p class="text-gray-700">Sugiere herramientas y software apropiados para implementar los análisis</p>
                </div>
            </div>
        </div>

        <!-- Input Section -->
        <div class="mb-8">
            <div class="bg-white p-6 rounded-xl shadow-lg">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">Analizar Estudio</h2>
                
                <!-- Tabs -->
                <div class="border-b border-gray-200 mb-6">
                    <ul class="flex flex-wrap -mb-px text-sm font-medium text-center">
                        <li class="mr-2">
                            <a href="#" id="textTabBtn" class="inline-block p-4 text-indigo-600 border-b-2 border-indigo-600 rounded-t-lg active" aria-current="page">
                                <i class="fas fa-keyboard mr-2"></i>Texto
                            </a>
                        </li>
                        <li class="mr-2">
                            <a href="#" id="fileTabBtn" class="inline-block p-4 text-gray-500 border-b-2 border-transparent rounded-t-lg hover:text-gray-600 hover:border-gray-300">
                                <i class="fas fa-file-alt mr-2"></i>Archivo
                            </a>
                        </li>
                    </ul>
                </div>
                
                <!-- Text Input Tab -->
                <div id="textInputTab" class="mb-4">
                    <div class="mb-4">
                        <textarea id="studyText" rows="6" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition" placeholder="Ingresa el resumen o abstract del estudio científico aquí..."></textarea>
                    </div>
                </div>
                
                <!-- File Input Tab (hidden by default) -->
                <div id="fileInputTab" class="mb-4 hidden">
                    <div class="flex justify-center items-center w-full">
                        <label class="flex flex-col w-full h-32 border-2 border-dashed border-indigo-300 rounded-lg items-center justify-center bg-gray-50 hover:bg-gray-100 cursor-pointer">
                            <div class="flex flex-col items-center justify-center pt-5 pb-6">
                                <i class="fas fa-cloud-upload-alt text-3xl text-indigo-500 mb-2"></i>
                                <p class="mb-2 text-sm text-gray-700"><span class="font-semibold">Haz clic para subir</span> o arrastra y suelta</p>
                                <p class="text-xs text-gray-500">PDF, DOCX, TXT (MAX. 10MB)</p>
                            </div>
                            <input id="fileInput" type="file" class="hidden" accept=".pdf,.docx,.txt" />
                        </label>
                    </div>
                    <div id="fileName" class="mt-2 text-sm text-gray-600 flex items-center hidden">
                        <i class="fas fa-file-alt mr-2"></i>
                        <span></span>
                        <button id="removeFile" class="ml-2 text-red-500">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                
                <div class="flex flex-col sm:flex-row justify-between items-center">
                    <div class="mb-4 sm:mb-0">
                        <select id="analysisType" class="border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-gray-600">
                            <option value="completo">Análisis completo</option>
                            <option value="clasificacion">Solo clasificación</option>
                            <option value="estadistico">Solo métodos estadísticos</option>
                            <option value="instrumentos">Solo instrumentos recomendados</option>
                        </select>
                    </div>
                    <button id="analyzeBtn" class="w-full sm:w-auto bg-indigo-600 text-white font-medium py-2 px-6 rounded-lg hover:bg-indigo-700 transition flex items-center justify-center">
                        <i class="fas fa-search mr-2"></i>Analizar Estudio
                    </button>
                </div>
            </div>
        </div>

        <!-- Results Section (Hidden initially) -->
        <div id="resultsSection" class="hidden">
            <!-- Loading Indicator -->
            <div id="loadingIndicator" class="flex justify-center items-center py-12">
                <div class="loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12"></div>
                <span class="ml-4 text-lg font-medium text-gray-700">Analizando estudio...</span>
            </div>
            
            <!-- Actual Results -->
            <div id="resultsContent" class="hidden">
                <div class="bg-white p-6 rounded-xl shadow-lg mb-8">
                    <h2 class="text-2xl font-bold mb-4 text-gray-800 flex items-center">
                        <i class="fas fa-clipboard-check text-indigo-600 mr-3"></i>
                        Resultados del Análisis
                    </h2>
                    
                    <!-- Classification Section -->
                    <div id="classificationSection" class="mb-6">
                        <h3 class="text-xl font-bold mb-3 text-gray-700">Clasificación del Estudio</h3>
                        <div class="bg-indigo-50 p-4 rounded-lg">
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div>
                                    <p class="font-semibold text-indigo-700">Tipo de Estudio</p>
                                    <p id="studyType" class="mt-1"></p>
                                </div>
                                <div>
                                    <p class="font-semibold text-indigo-700">Metodología</p>
                                    <p id="methodology" class="mt-1"></p>
                                </div>
                                <div>
                                    <p class="font-semibold text-indigo-700">Área de Investigación</p>
                                    <p id="researchArea" class="mt-1"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Statistical Methods Section -->
                    <div id="statisticalSection" class="mb-6">
                        <h3 class="text-xl font-bold mb-3 text-gray-700">Métodos Estadísticos Recomendados</h3>
                        <div class="bg-green-50 p-4 rounded-lg">
                            <ul id="statMethods" class="space-y-2">
                                <!-- Will be populated dynamically -->
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Tools Section -->
                    <div id="toolsSection">
                        <h3 class="text-xl font-bold mb-3 text-gray-700">Instrumentos y Software Recomendados</h3>
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <div id="tools" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                <!-- Will be populated dynamically -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6 pt-4 border-t border-gray-200">
                        <h3 class="text-xl font-bold mb-3 text-gray-700">Comentarios Adicionales</h3>
                        <div class="p-4 bg-gray-50 rounded-lg">
                            <p id="additionalComments" class="text-gray-700"></p>
                        </div>
                    </div>
                    
                    <div class="mt-6 flex justify-end">
                        <button id="exportBtn" class="bg-indigo-600 text-white font-medium py-2 px-6 rounded-lg hover:bg-indigo-700 transition">
                            <i class="fas fa-download mr-2"></i>Exportar Resultados
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Examples Modal -->
        <div id="examplesModal" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-screen overflow-y-auto">
                <div class="p-6 border-b border-gray-200">
                    <div class="flex justify-between items-center">
                        <h2 class="text-2xl font-bold text-gray-800">Ejemplos de Estudios</h2>
                        <button id="closeExamplesBtn" class="text-gray-400 hover:text-gray-600">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                </div>
                <div class="p-6">
                    <div class="space-y-4">
                        <div class="p-4 bg-indigo-50 rounded-lg cursor-pointer hover:bg-indigo-100 transition example-item">
                            <h3 class="font-bold text-indigo-700">Ejemplo 1: Estudio Experimental</h3>
                            <p class="mt-1 text-gray-700 text-sm">Efecto de un programa de intervención basado en mindfulness sobre los niveles de estrés en estudiantes universitarios: un ensayo controlado aleatorizado</p>
                            <div class="mt-2 text-xs text-indigo-600 hidden example-content">
                                El presente estudio evaluó la eficacia de una intervención basada en mindfulness para reducir los niveles de estrés en estudiantes universitarios. Se realizó un ensayo controlado aleatorizado con 120 estudiantes (60 en el grupo de intervención y 60 en el grupo control). El grupo de intervención participó en un programa de mindfulness de 8 semanas, mientras que el grupo control no recibió tratamiento. Se midieron los niveles de estrés percibido, ansiedad y bienestar psicológico antes y después de la intervención, así como en un seguimiento a los 3 meses. Los resultados mostraron una reducción significativa (p<0.01) en los niveles de estrés y ansiedad en el grupo de intervención en comparación con el grupo control, y estos efectos se mantuvieron en el seguimiento a los 3 meses. Estos hallazgos sugieren que las intervenciones basadas en mindfulness pueden ser herramientas efectivas para manejar el estrés en poblaciones universitarias.
                            </div>
                            <button class="mt-2 text-indigo-600 font-medium show-example">Ver contenido <i class="fas fa-chevron-down ml-1"></i></button>
                        </div>
                        
                        <div class="p-4 bg-indigo-50 rounded-lg cursor-pointer hover:bg-indigo-100 transition example-item">
                            <h3 class="font-bold text-indigo-700">Ejemplo 2: Estudio Correlacional</h3>
                            <p class="mt-1 text-gray-700 text-sm">Relación entre calidad del sueño, rendimiento académico y bienestar emocional en una muestra de estudiantes de medicina</p>
                            <div class="mt-2 text-xs text-indigo-600 hidden example-content">
                                Este estudio investigó la relación entre la calidad del sueño, el rendimiento académico y el bienestar emocional en estudiantes de medicina. Se recolectaron datos de 245 estudiantes mediante el Índice de Calidad del Sueño de Pittsburgh (PSQI), registros académicos y la Escala de Depresión, Ansiedad y Estrés (DASS-21). Se realizaron análisis de correlación y regresión múltiple para examinar las asociaciones entre las variables. Los resultados indicaron una correlación negativa significativa entre la mala calidad del sueño y el rendimiento académico (r=-0.42, p<0.001), así como una correlación positiva entre la mala calidad del sueño y los síntomas de depresión (r=0.38, p<0.001) y ansiedad (r=0.45, p<0.001). El análisis de regresión múltiple reveló que la calidad del sueño explicaba el 18% de la varianza en el rendimiento académico, incluso después de controlar por variables sociodemográficas. Estos hallazgos subrayan la importancia de implementar estrategias para mejorar la calidad del sueño en estudiantes universitarios.
                            </div>
                            <button class="mt-2 text-indigo-600 font-medium show-example">Ver contenido <i class="fas fa-chevron-down ml-1"></i></button>
                        </div>
                        
                        <div class="p-4 bg-indigo-50 rounded-lg cursor-pointer hover:bg-indigo-100 transition example-item">
                            <h3 class="font-bold text-indigo-700">Ejemplo 3: Estudio Cualitativo</h3>
                            <p class="mt-1 text-gray-700 text-sm">Percepciones y experiencias de pacientes con diabetes tipo 2 sobre barreras y facilitadores para la adherencia al tratamiento: un análisis fenomenológico</p>
                            <div class="mt-2 text-xs text-indigo-600 hidden example-content">
                                Este estudio cualitativo exploró las percepciones y experiencias de pacientes con diabetes tipo 2 respecto a los factores que facilitan o dificultan la adherencia al tratamiento. Se realizaron entrevistas semiestructuradas a 18 pacientes (10 mujeres y 8 hombres) con edades entre 45 y 68 años. Se utilizó un enfoque fenomenológico para el análisis de los datos, identificando temas y patrones comunes en las experiencias de los participantes. Los resultados revelaron cuatro temas principales: 1) Importancia del apoyo familiar y social; 2) Relación médico-paciente y calidad de la comunicación; 3) Accesibilidad a medicamentos y servicios de salud; y 4) Integración de cambios en el estilo de vida. Las barreras más frecuentemente mencionadas fueron las limitaciones económicas, la complejidad del régimen terapéutico y las creencias culturales sobre la enfermedad. Estos hallazgos pueden informar el desarrollo de intervenciones más efectivas para mejorar la adherencia al tratamiento en esta población.
                            </div>
                            <button class="mt-2 text-indigo-600 font-medium show-example">Ver contenido <i class="fas fa-chevron-down ml-1"></i></button>
                        </div>
                    </div>
                    
                    <div class="mt-6 flex justify-center">
                        <button id="useExampleBtn" class="bg-indigo-600 text-white font-medium py-2 px-6 rounded-lg hover:bg-indigo-700 transition" disabled>
                            Usar ejemplo seleccionado
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Help Modal -->
        <div id="helpModal" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-screen overflow-y-auto">
                <div class="p-6 border-b border-gray-200">
                    <div class="flex justify-between items-center">
                        <h2 class="text-2xl font-bold text-gray-800">Ayuda y Guía de Uso</h2>
                        <button id="closeHelpBtn" class="text-gray-400 hover:text-gray-600">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                </div>
                <div class="p-6">
                    <div class="space-y-6">
                        <div>
                            <h3 class="text-lg font-bold text-indigo-700 mb-2">¿Cómo funciona?</h3>
                            <p>Esta herramienta utiliza inteligencia artificial para analizar estudios científicos y proporcionar recomendaciones sobre métodos estadísticos e instrumentos adecuados para su análisis.</p>
                        </div>
                        
                        <div>
                            <h3 class="text-lg font-bold text-indigo-700 mb-2">Pasos para usar el clasificador:</h3>
                            <ol class="list-decimal pl-5 space-y-2">
                                <li>Ingresa el resumen o abstract de tu estudio en el área de texto, o sube un archivo PDF, DOCX o TXT.</li>
                                <li>Selecciona el tipo de análisis que deseas realizar.</li>
                                <li>Haz clic en "Analizar Estudio".</li>
                                <li>Revisa los resultados que incluirán clasificación, métodos estadísticos recomendados e instrumentos sugeridos.</li>
                                <li>Puedes exportar los resultados para su uso posterior.</li>
                            </ol>
                        </div>
                        
                        <div>
                            <h3 class="text-lg font-bold text-indigo-700 mb-2">Tipos de estudios admitidos:</h3>
                            <ul class="list-disc pl-5 space-y-1">
                                <li>Estudios experimentales y cuasi-experimentales</li>
                                <li>Estudios observacionales (transversales, casos y controles, cohortes)</li>
                                <li>Estudios correlacionales</li>
                                <li>Estudios cualitativos</li>
                                <li>Revisiones sistemáticas y meta-análisis</li>
                                <li>Estudios de validación de instrumentos</li>
                                <li>Y muchos más...</li>
                            </ul>
                        </div>
                        
                        <div>
                            <h3 class="text-lg font-bold text-indigo-700 mb-2">Consejos:</h3>
                            <ul class="list-disc pl-5 space-y-1">
                                <li>Para mejores resultados, incluye información sobre objetivos, metodología, variables y población del estudio.</li>
                                <li>Si tienes dudas, puedes utilizar los ejemplos proporcionados como guía.</li>
                                <li>Los resultados son orientativos y deben ser validados por un experto en metodología de investigación.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- API Key Modal -->
        <div id="apiKeyModal" class="fixed inset-0 bg-gray-900 bg-opacity-80 flex items-center justify-center z-50">
            <div class="bg-white rounded-xl shadow-xl max-w-lg w-full p-6">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">Configuración Inicial</h2>
                <p class="mb-4 text-gray-700">Para utilizar el Clasificador de Estudios Científicos, necesitas proporcionar una clave de API de OpenAI. Esta clave se almacenará localmente en tu navegador.</p>
                
                <div class="mb-4">
                    <label for="apiKey" class="block text-sm font-medium text-gray-700 mb-1">Clave de API de OpenAI</label>
                    <input type="password" id="apiKey" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition" placeholder="Ingresa tu clave de API (sk-...)">
                    <p class="mt-1 text-xs text-gray-500">Tu clave es privada y solo se almacena en tu dispositivo.</p>
                </div>
                
                <div class="mb-4">
                    <label class="flex items-center">
                        <input type="checkbox" id="rememberApiKey" class="rounded text-indigo-600 focus:ring-indigo-500">
                        <span class="ml-2 text-sm text-gray-700">Recordar mi clave de API</span>
                    </label>
                </div>
                
                <div class="flex justify-end space-x-3">
                    <button id="demoModeBtn" class="text-gray-700 font-medium py-2 px-4 hover:text-gray-900 transition">
                        Modo demostración
                    </button>
                    <button id="saveApiKeyBtn" class="bg-indigo-600 text-white font-medium py-2 px-6 rounded-lg hover:bg-indigo-700 transition">
                        Guardar y continuar
                    </button>
                </div>
                
                <p class="mt-4 text-xs text-gray-500">Si no tienes una clave API, puedes obtenerla en <a href="https://platform.openai.com/account/api-keys" target="_blank" class="text-indigo-600 hover:underline">OpenAI</a>.</p>
            </div>
        </div>
    </main>

    <footer class="gradient-bg text-white py-6">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <p class="mb-4 md:mb-0">&copy; 2025 Clasificador de Estudios Científicos</p>
                <div class="flex space-x-6">
                    <a href="#" class="hover:text-indigo-200 transition"><i class="fab fa-github"></i></a>
                    <a href="#" class="hover:text-indigo-200 transition"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="hover:text-indigo-200 transition"><i class="fas fa-envelope"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // DOM Elements
        const textTabBtn = document.getElementById('textTabBtn');
        const fileTabBtn = document.getElementById('fileTabBtn');
        const textInputTab = document.getElementById('textInputTab');
        const fileInputTab = document.getElementById('fileInputTab');
        const fileInput = document.getElementById('fileInput');
        const fileName = document.getElementById('fileName');
        const removeFile = document.getElementById('removeFile');
        const analyzeBtn = document.getElementById('analyzeBtn');
        const resultsSection = document.getElementById('resultsSection');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const resultsContent = document.getElementById('resultsContent');
        const examplesBtn = document.getElementById('examplesBtn');
        const examplesModal = document.getElementById('examplesModal');
        const closeExamplesBtn = document.getElementById('closeExamplesBtn');
        const helpBtn = document.getElementById('helpBtn');
        const helpModal = document.getElementById('helpModal');
        const closeHelpBtn = document.getElementById('closeHelpBtn');
        const apiKeyModal = document.getElementById('apiKeyModal');
        const saveApiKeyBtn = document.getElementById('saveApiKeyBtn');
        const demoModeBtn = document.getElementById('demoModeBtn');
        const exportBtn = document.getElementById('exportBtn');
        const exampleItems = document.querySelectorAll('.example-item');
        const showExampleBtns = document.querySelectorAll('.show-example');
        const useExampleBtn = document.getElementById('useExampleBtn');
        
        // Global variables
        let selectedFile = null;
        let selectedExample = null;
        let apiKey = localStorage.getItem('openaiApiKey');
        let demoMode = localStorage.getItem('demoMode') === 'true';
        
        // Initialize based on stored API key
        if (apiKey || demoMode) {
            apiKeyModal.classList.add('hidden');
        }
        
        // Tab switching
        textTabBtn.addEventListener('click', (e) => {
            e.preventDefault();
            textTabBtn.classList.add('text-indigo-600', 'border-indigo-600');
            textTabBtn.classList.remove('text-gray-500', 'border-transparent');
            fileTabBtn.classList.remove('text-indigo-600', 'border-indigo-600');
            fileTabBtn.classList.add('text-gray-500', 'border-transparent');
            textInputTab.classList.remove('hidden');
            fileInputTab.classList.add('hidden');
        });
        
        fileTabBtn.addEventListener('click', (e) => {
            e.preventDefault();
            fileTabBtn.classList.add('text-indigo-600', 'border-indigo




 
